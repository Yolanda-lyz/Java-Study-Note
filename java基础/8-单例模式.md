### 1. 单例模式

单例模式是一种常用的设计模式，使用单例模式的类只能允许一个实例存在，且该实例由该类自己负责创建，并提供一个全局的访问点。

### 2. 单例类特征

1）构造函数声明为private，只能通过该类提供的静态方法来访问唯一实例；

2）须确保单例类的实例有且只有一个，所以在多线程环境下，应慎重考虑单例类实例创建的线程安全性。

### 3. 单例模式的写法及线程安全性分析

#### 3.1 饿汉式

不管用不用，都先创建。使用了static关键字修饰，在类加载过程中就会初始化该实例，在jvm层面上保证了线程安全。
```java
public class Singleton {
    private static Singleton instance = new Singleton();
    private Singleton() {}
    public Singleton getInstance() {
        return instance;
    }
}
```

#### 3.2 懒汉式

##### 3.2.1 普通懒汉式【非线程安全】

```java
public class Singleton {
    private static Singleton instance;

    private Singleton() {}
    
    public static Singleton getInstance() {
        if(instance == null) {           //A线程执行
            instance = new Singleton();  //B线程执行
        }
        return instance;
    }
}
```
##### 3.2.2 同步方法的懒汉式【线程安全】
```java
public class Singleton {
    private static Singleton instance;

    private Singleton() {}
    
    public synchronized static Singleton getInstance() {
        if(instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
```

##### 3.2.3 优化同步方法性能的懒汉式【非线程安全】
```java
public class Singleton {
    private static Singleton instance;

    private Singleton() {}
    
    public static Singleton getInstance() {
        if(instance == null) {
            synchronized(instance) {
                if(instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```

##### 3.2.4 优化同步方法性能的懒汉式（双重检查锁）【线程安全】
```java
public class Singleton {
    private static volatile Singleton instance;

    private Singleton() {}
    
    public static Singleton getInstance() {
        if(instance == null) {
            synchronized(instance) {
                if(instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```

#### 3.3 静态内部类
```java
public class Singleton {
    private Singleton() {}
    
    private static class InstanceHolder {
        public static Singleton instance = new Singleton();
    }
    public static Singleton getInstance() {
        return InstanceHolder.instance;
    }
}
```

#### 3.4 枚举实现
```java
public enum Singleton {
    INSTANCE;
    private Singleton() {}
}

```
